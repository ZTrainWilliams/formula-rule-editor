import{R as b,j as I,L as _,c as O,a as f,w as m,f as j,F as C,b as p,o as P,e as g}from"./index.706da384.js";const M=()=>{const o="canvasBox",c=document.querySelector(`#${o}`);let l=window.innerWidth,u=window.innerHeight;c.width=l,c.height=u;const x=0,z=0,y=600,a=function(s){return s*Math.PI/180},r=function(){return Math.sin(Math.floor(Math.random()*360)*Math.PI/180)},t={obj:{x,y:z,z:y},dest:{x:0,y:0,z:1},dist:{x:0,y:0,z:200},ang:{cplane:0,splane:0,ctheta:0,stheta:0},zoom:1,disp:{x:l/2,y:u/2,z:0},upd(){t.dist.x=t.dest.x-t.obj.x,t.dist.y=t.dest.y-t.obj.y,t.dist.z=t.dest.z-t.obj.z,t.ang.cplane=-t.dist.z/Math.sqrt(t.dist.x*t.dist.x+t.dist.z*t.dist.z),t.ang.splane=t.dist.x/Math.sqrt(t.dist.x*t.dist.x+t.dist.z*t.dist.z),t.ang.ctheta=Math.sqrt(t.dist.x*t.dist.x+t.dist.z*t.dist.z)/Math.sqrt(t.dist.x*t.dist.x+t.dist.y*t.dist.y+t.dist.z*t.dist.z),t.ang.stheta=-t.dist.y/Math.sqrt(t.dist.x*t.dist.x+t.dist.y*t.dist.y+t.dist.z*t.dist.z)}},d={parts:{sz(s,i){return{x:s.x*i.x,y:s.y*i.y,z:s.z*i.z}},rot:{x(s,i){return{x:s.x,y:s.y*Math.cos(a(i.x))-s.z*Math.sin(a(i.x)),z:s.y*Math.sin(a(i.x))+s.z*Math.cos(a(i.x))}},y(s,i){return{x:s.x*Math.cos(a(i.y))+s.z*Math.sin(a(i.y)),y:s.y,z:-s.x*Math.sin(a(i.y))+s.z*Math.cos(a(i.y))}},z(s,i){return{x:s.x*Math.cos(a(i.z))-s.y*Math.sin(a(i.z)),y:s.x*Math.sin(a(i.z))+s.y*Math.cos(a(i.z)),z:s.z}}},pos(s,i){return{x:s.x+i.x,y:s.y+i.y,z:s.z+i.z}}},pov:{plane(s){return{x:s.x*t.ang.cplane+s.z*t.ang.splane,y:s.y,z:s.x*-t.ang.splane+s.z*t.ang.cplane}},theta(s){return{x:s.x,y:s.y*t.ang.ctheta-s.z*t.ang.stheta,z:s.y*t.ang.stheta+s.z*t.ang.ctheta}},set(s){return{x:s.x-t.obj.x,y:s.y-t.obj.y,z:s.z-t.obj.z}}},persp(s){return{x:s.x*t.dist.z/s.z*t.zoom,y:s.y*t.dist.z/s.z*t.zoom,z:s.z*t.zoom,p:t.dist.z/s.z}},disp(s,i){return{x:s.x+i.x,y:-s.y+i.y,z:s.z+i.z,p:s.p}},steps(s,i,w,n,h){let e=d.parts.sz(s,i);return e=d.parts.rot.x(e,w),e=d.parts.rot.y(e,w),e=d.parts.rot.z(e,w),e=d.parts.pos(e,n),e=d.pov.plane(e),e=d.pov.theta(e),e=d.pov.set(e),e=d.persp(e),e=d.disp(e,h),e}};(function(){const s=function(n){this.transIn={},this.transOut={},this.transIn.vtx=n.vtx,this.transIn.sz=n.sz,this.transIn.rot=n.rot,this.transIn.pos=n.pos};s.prototype.vupd=function(){this.transOut=d.steps(this.transIn.vtx,this.transIn.sz,this.transIn.rot,this.transIn.pos,t.disp)};const i=function(){this.vel=.04,this.lim=360,this.diff=300,this.initPos=100,this.toX=x,this.toY=z,this.go()};i.prototype.go=function(){this.canvas=document.getElementById(o),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.$=this.canvas.getContext("2d"),this.$.globalCompositeOperation="source-over",this.varr=[],this.dist=[],this.calc=[];for(let n=0,h=200;n<h;n+=1)this.add();this.rotObj={x:0,y:0,z:0},this.objSz={x:l/5,y:u/5,z:l/5}},i.prototype.add=function(){this.varr.push(new s({vtx:{x:r(),y:r(),z:r()},sz:{x:0,y:0,z:0},rot:{x:20,y:-20,z:0},pos:{x:this.diff*Math.sin(360*Math.random()*Math.PI/180),y:this.diff*Math.sin(360*Math.random()*Math.PI/180),z:this.diff*Math.sin(360*Math.random()*Math.PI/180)}})),this.calc.push({x:360*Math.random(),y:360*Math.random(),z:360*Math.random()})},i.prototype.upd=function(){t.obj.x+=(this.toX-t.obj.x)*.025,t.obj.y+=(this.toY-t.obj.y)*.025},i.prototype.draw=function(){this.$.clearRect(0,0,this.canvas.width,this.canvas.height),t.upd(),this.rotObj.x+=.05,this.rotObj.y+=.05,this.rotObj.z+=.05;for(let n=0;n<this.varr.length;n+=1){for(const e in this.calc[n])Object.prototype.hasOwnProperty.call(this.calc[n],e)&&(this.calc[n][e]+=this.vel,this.calc[n][e]>this.lim&&(this.calc[n][e]=0));if(this.varr[n].transIn.pos={x:this.diff*Math.cos(this.calc[n].x*Math.PI/180),y:this.diff*Math.sin(this.calc[n].y*Math.PI/180),z:this.diff*Math.sin(this.calc[n].z*Math.PI/180)},this.varr[n].transIn.rot=this.rotObj,this.varr[n].transIn.sz=this.objSz,this.varr[n].vupd(),this.varr[n].transOut.p<0)continue;const h=this.$.createRadialGradient(this.varr[n].transOut.x,this.varr[n].transOut.y,this.varr[n].transOut.p,this.varr[n].transOut.x,this.varr[n].transOut.y,this.varr[n].transOut.p*2);this.$.globalCompositeOperation="lighter",h.addColorStop(0,"hsla(255, 255%, 255%, 1)"),h.addColorStop(.5,`hsla(${n+2}, 79%, 50%, 1)`),h.addColorStop(1,`hsla(${n}, 79%, 50%, .5)`),this.$.fillStyle=h,this.$.beginPath(),this.$.arc(this.varr[n].transOut.x,this.varr[n].transOut.y,this.varr[n].transOut.p*2,0,Math.PI*2,!1),this.$.fill(),this.$.closePath()}},i.prototype.anim=function(){window.requestAnimationFrame=function(){return window.requestAnimationFrame||function(h,e){window.setTimeout(h,1e3/30)}}();const n=function(){this.upd(),this.draw(),window.requestAnimationFrame(n)}.bind(this);window.requestAnimationFrame(n)},i.prototype.run=function(){this.anim(),window.addEventListener("mousemove",function(n){this.toX=(n.clientX-this.canvas.width/2)*-.3,this.toY=(n.clientY-this.canvas.height/2)*.3}.bind(this)),window.addEventListener("touchmove",function(n){n.preventDefault(),this.toX=(n.touches[0].clientX-this.canvas.width/2)*-.3,this.toY=(n.touches[0].clientY-this.canvas.height/2)*.3}.bind(this)),window.addEventListener("mousedown",function(n){for(let h=0;h<100;h+=1)this.add()}.bind(this)),window.addEventListener("touchstart",function(n){n.preventDefault();for(let h=0;h<100;h+=1)this.add()}.bind(this))},new i().run()})(),window.addEventListener("resize",function(){l=window.innerWidth,u=window.innerHeight,c.width=l,c.height=u},!1)},S=()=>{const v="canvasBox",o=document.querySelector(`#${v}`);o.width=window.innerWidth,o.height=window.innerHeight;const c=o.getContext("2d"),l=1200,u=o.width*2;let x,z,y=[],a,r;d();function t(){window.requestAnimationFrame(t),s(),i()}function d(){for(x=o.width/2,z=o.height/2,y=[],r=0;r<l;r+=1)a={x:Math.random()*o.width,y:Math.random()*o.height,z:Math.random()*o.width,o:`0.${Math.floor(Math.random()*99)}1`},y.push(a)}function s(){for(r=0;r<l;r+=1)a=y[r],a.z-=1,a.z<=0&&(a.z=o.width)}function i(){let w,n,h;for(c.clearRect(0,0,o.width,o.height),r=0;r<l;r+=1)a=y[r],w=(a.x-x)*(u/a.z),w+=x,n=(a.y-z)*(u/a.z),n+=z,h=1*(u/a.z),c.beginPath(),c.arc(w,n,h>20?20:h,0,2*Math.PI),c.fillStyle=`rgba(209, 255, 255, ${a.o} )`,c.fill(),c.closePath()}window.addEventListener("resize",b(function(){(o.width!==window.innerWidth||o.width!==window.innerWidth)&&(o.width=window.innerWidth,o.height=window.innerHeight,d())},100),!1),t()};const $={id:"canvasBox",class:"canvas",ref:"canvas"},B={__name:"index",setup(v){const o=I("setNebulaCanvas"),c=l=>{switch(l){case"setNebulaCanvas":M();break;case"setStarryCanvas":S();break}};return _(()=>{M()}),(l,u)=>{const x=p("el-option"),z=p("el-select");return P(),O(C,null,[f(z,{modelValue:o.value,"onUpdate:modelValue":u[0]||(u[0]=y=>o.value=y),onChange:c,style:{"margin-bottom":"12px"}},{default:m(()=>[f(x,{value:"setNebulaCanvas",label:"\u661F\u4E91"},{default:m(()=>[g("\u661F\u4E91")]),_:1}),f(x,{value:"setStarryCanvas",label:"\u661F\u7A7A"},{default:m(()=>[g("\u661F\u7A7A")]),_:1})]),_:1},8,["modelValue"]),j("canvas",$,null,512)],64)}}};export{B as default};
